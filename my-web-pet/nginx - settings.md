
| Безопасность                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| server_tokens off;                                                                                                                                                                                                                                                                                                                                                           | Не показывать данные о сервере при ошибке                                                                                                                                                                                                                                                                                                                                                                       |
| add_header X-Content-Type-Options "nosniff";                                                                                                                                                                                                                                                                                                                                 | Принудительно указывает браузеру **строго соблюдать** объявленный `Content-Type`                                                                                                                                                                                                                                                                                                                                |
| add_header X-Frame-Options "SAMEORIGIN";                                                                                                                                                                                                                                                                                                                                     | (i) - устарело! Предотвращает возможность добавления через iframe нашего ресурса                                                                                                                                                                                                                                                                                                                                |
| add_header Content-Security-Policy "<br>default-src 'self' https://static.abotkin.space; <br>script-src 'self' https://static.abotkin.space; <br>style-src 'self' 'unsafe-inline' https://static.abotkin.space; <br>img-src 'self' data: https://static.abotkin.space; <br>object-src 'none'; <br>base-uri 'self'; <br>frame-ancestors 'self'; <br>form-action 'self';<br>"; | <br>можно делать запросы только на self и исключение https://static.abotkin.space<br>то же для js<br>то же для css, разрешает inline<br>тоже для img, также поддержка встроенных для css/html<br>блокирует плагины (Flash, Java и т.д.)<br>запрещает подмену базового URL (`<base href="https://attacker.com">`<br>защита от кликджекинга (аналог `X-Frame-Options`)<br>запрещает отправку форм на чужие домены |
|                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Кеширование                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                 |
| access_log /var/log/nginx/abotkin.access.log combined buffer=16k;                                                                                                                                                                                                                                                                                                            | куда пишем, вид стандартный, в буфер перед тем как писать в файл                                                                                                                                                                                                                                                                                                                                                |
| error_log /var/log/nginx/abotkin.error.log warn;                                                                                                                                                                                                                                                                                                                             | пишем еррор-логи с emerg до warn                                                                                                                                                                                                                                                                                                                                                                                    |
|                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                 |
|                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                 |
